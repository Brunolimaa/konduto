- Konduto Risk Model Challenge
- Developer: Bruno Pereira de Lima
- LinkedIn: https://www.linkedin.com/in/bruno-lima-b85501103/

This project implements a simplified risk model for e-commerce fraud detection. It calculates key features (TOTAL_AMOUNT, CPF_RATING, CC_SCORE) for a given transaction by integrating with an external CPF rating API and an internal database.

- **Back-end**: The backend is built using Java 17.
- **API**: The service is built using Spring Boot 3 with Spring JPA
- **DB**: The data base is built H2 using Flyway to control the versions
- **Structure**: Docker for containerization


## Requirements

- **Docker**: <img src="https://github.com/user-attachments/assets/908265ca-abc9-4e0b-a613-f9bd89d72920" height="40"/>
- **Java Development Kit (JDK) 17+ & Maven**: <img height="40" alt="image" src="https://github.com/user-attachments/assets/bdfe8a1c-4e86-4ef9-a41c-4057de0b66b2" />
- If you choose to run the project directly via java -jar. 


### Getting Started

#### 1. Clone the Repository

Clone this repository to your local machine:

```
git clone https://github.com/Brunolimaa/konduto.git
cd tracker

```


#### 2. Build the Docker Image
The project was set up in Dockerfile, so you can run the project using Docker.

Doing this the MAVEN build will be executed automatically, and the application will be started in a container.

##### Start the Docker Containers

```
docker build -t konduto-risk-app:latest .
```
#### 3. Option B: Run using Java (JRE)
This option requires you to have Java (JDK 17+) and Maven installed on your machine.

```
mvn clean install
```
after this execute the .jar file:

```
cd target/
java -jar challenge-0.0.1-SNAPSHOT.jar
```
<img width="1903" height="1080" alt="1" src="https://github.com/user-attachments/assets/adbb8ebc-5341-49c2-846b-9655754240c2" />


## Testing API - Swagger

#### 1. Access the Swagger documentation 

```
http://localhost:8080/swagger-ui/index.html
```

<img width="959" height="377" alt="3" src="https://github.com/user-attachments/assets/8c0353da-fe65-4bed-97cd-42ebfdabb71c" />

**expected results**:

<img width="958" height="488" alt="4" src="https://github.com/user-attachments/assets/b8214119-88f9-4d54-afac-5f444649d6d1" />


#### 2. CURL in case to test in another platform such as Postman
```
curl -X 'POST' \
  'http://localhost:8080/v1/features' \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{
  "total_amount": 87.99,
  "cpf": "94548325069",
  "cc": {
    "bin": "548110",
    "last4": "2104"
  }
}'
```

<img width="1903" height="1080" alt="5" src="https://github.com/user-attachments/assets/7f978f37-8b2d-4718-b646-ca6ecb3371c5" />


##### 2.1 Unit tests and Integration tests
You can run the unit tests and integration tests using the following command:

```
    mvn clean test
```


## Project Observations

I had a question about whether I needed to develop the external "Trampo Certo Rating" API.

The first part of my code tries to access this API at http://localhost:3000. If it's not running locally, I configured the code to point to an external mock API, which returns fixed values to simulate its behavior.

I used a simple architectural model (MVC). I applied the Dependency Inversion Principle to make the Open/Closed Principle easier to achieve, and to allow for the use of Strategy patterns, aiming for future improvements and system growth.

Another important point is that I added Flyway to manage database versioning. For this challenge, I used an in-memory database (H2), focusing only on the SQL logic for calculating the operations.

For the API's organization, I created interfaces responsible only for the documentation of each REST controller, applying the Single Responsibility Principle.


## AI-assisted

To help with faster development, AI assistance was used—specifically GitHub Copilot—to create basic unit tests and generate descriptions for each class, helping to maintain organization and standards.
I was responsible for reviewing and validating each piece of code and test generated by the AI, as well as improving the class descriptions when necessary.


